# Backend Repository

This is the backend repository for our project. It is mainly build with Python and FastAPI.

This REAMDE document details the necessary steps to get your application up and running.

## Requirements
Be sure to install first:

* Python 3.11.^ - [Python 3.11 Download Page](https://www.python.org/downloads/release/python-3110/)
* Poetry - [Poetry Download Page](https://pypi.org/project/poetry/)

## Set up the project

### Clone the repo

First you need to clone the repository, you can do this with:

```bash
$ git clone https://github.com/TIC-2023-GMC/Backend-TIC-2023-GMC.git
```

### Dependencies

#### Poetry

We use Poetry to manage our dependencies. Please refer to the official documentation to install it.

#### Install Dependencies

Remember you need to locate inside your project folder:

```
$ cd Backend-TIC-2023-GMC/
```

Here you can install all the project dependencies with the following command:

```
$ poetry install
```

Then you can activate the virtual environment created by poetry with:

```
$ poetry shell
```

#### Adding new dependencies

To add a new dependency, you can use the following command:

```
$ poetry add <package-name>
```

Poetry will change the `.lock` file, so you **have** to commit and push this file so the whole team can have the same package versions.


You can work inside this environment as it has all the dependencies installed.

## Run the server

To run the server locally, you can use uvicorn:

```
$ poetry run uvicorn app.main:app --reload
```

This will start the server at http://localhost:8000

If you want other devices (such as a mobile phone) to access the API, you can modify the previous command and run it like this:

```
$ poetry run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## Check your code

We use Black for format our Python code. To format the code, run the following command:

```
$ poetry run black
```

## Contribution guidelines
When you work on your code, you should checkout to "develop" branch:

```
$ git checkout develop
```

And fetch all the changes with git pull:

```
$ git pull
```

Then, you must checkout to your work branch (generated by every task):

```
$ git checkout <branch-name>
```

When you are done with your work, we recommend adding the files you modified with the following command:

```
$ git add <filename>
```

Then, you can commit your changes with:

```
$ git commit -m "<commit-message>"
```

>>
**NOTE**: The <commit-message> should have the following structure: <br>
>*TICBACK-[#]: "[message]"*

Where [#] is the number of the task you are currently working for, and [message] is the actual commit message.

Finally, you can push your changes to your work branch with:

```
$ git push
```

Remember you need to create a Pull Request (PR) once you have pushed your changes and these comply to the GitHub Actions config.
